<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Math Module 5 Review</title>
  <style>
    body { font-family: "Comic Sans MS", "Comic Neue", Arial, sans-serif; background: #f0f8ff; margin: 0; padding: 0; overflow-x: hidden; }
    header {
      background: linear-gradient(90deg, #0074d9, #39c0ed);
      color: white;
      padding: 0.6rem 1.2rem;
      text-align: center;
      font-size: 1.6rem;
      font-weight: bold;
      letter-spacing: 1px;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      position: relative;
      z-index: 1;
    }
    .hidden { display: none; }
    button {
      background: #0074d9;
      color: white;
      border: none;
      padding: 10px 15px;
      margin: 8px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.2s;
    }
    button:hover { background: #005fa3; }
    .feedback { margin-top: 1rem; font-weight: bold; font-size: 1.2rem; }
    .correct { color: #28a745; }
    .incorrect { color: #dc3545; }
    .score { font-size: 1.3rem; margin-top: 1rem; font-weight: bold; }
    .message { font-size: 1.1rem; margin-top: 0.5rem; font-style: italic; }
    .progress { font-size: 1rem; margin-bottom: 0.3rem; font-weight: bold; }
    .progress-bar-container {
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
      height: 18px;
      margin-bottom: 1rem;
    }
    .progress-bar {
      background: linear-gradient(90deg, #39c0ed, #28a745);
      height: 100%;
      width: 0%;
      transition: width 0.4s ease;
    }
    #q-image {
      max-width: 100%;
      height: auto;
      display: none;
      margin: 0 0 10px 0;
      border: 1px dashed #bcd;
      border-radius: 10px;
      padding: 4px;
      background: #f7fbff;
    }
    #start-screen { margin-top: 0.2rem; text-align: center; }

    /* Confetti canvas covers the page but stays behind content */
    #confetti-canvas {
      position: fixed;
      pointer-events: none;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }
  </style>
</head>
<body>
  <header>üìò Math Module 5 Review</header>
  <canvas id="confetti-canvas"></canvas>
  <div class="container">
    <div id="start-screen">
      <h2>Welcome! Pick a Test Form:</h2>
      <button onclick="startTest('A')">Form A</button>
      <button onclick="startTest('B')">Form B</button>
    </div>

    <div id="quiz-screen" class="hidden">
      <p class="progress" id="progress"></p>
      <div class="progress-bar-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
      <img id="q-image" alt="Question diagram"/>
      <h2 id="question-text"></h2>
      <div id="answers"></div>
      <div class="feedback" id="feedback"></div>
      <button id="next-btn" class="hidden" onclick="nextQuestion()">Next Question ‚û°Ô∏è</button>
    </div>

    <div id="end-screen" class="hidden">
      <h2>üéâ Test Complete!</h2>
      <p class="score" id="final-score"></p>
      <p class="score" id="percent-score"></p>
      <p class="message" id="performance-message"></p>
      <button onclick="restart()">üîÑ Try Again</button>
    </div>
  </div>

  <audio id="ding-sound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="buzz-sound" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>

<script>
const tests = {
  A: [
    {
      q: "Which multiplication equation is shown by the area model?",
      options: [
        "10 √ó 18 = 180",
        "10 √ó 14 = 140",
        "8 √ó 16 = 128",
        "6 √ó 18 = 108"
      ],
      answer: "8 √ó 16 = 128",
      image: "assets/MM5A1.png"
    },
    {
      q: "What is the product?\n24 √ó 9",
      options: ["189","216","276","309"],
      answer: "216"
    },
    {
      q: "What is the product?\n159 √ó 5",
      options: ["555","695","755","795"],
      answer: "795"
    },
    {
      q: "What is the product of 8 √ó 1,247?",
      options: ["9,976","9,876","10,476","10,976"],
      answer: "9,976"
    },
    {
      q: "Which of these uses expanded form and the Distributive Property to find 7 √ó 53?",
      options: [
        "(7 √ó 50) + (3)",
        "(7 √ó 5) + (7 √ó 3)",
        "(7 √ó 50) + (7 √ó 3)",
        "(7 √ó 5) + (7 √ó 3 √ó 10)"
      ],
      answer: "(7 √ó 50) + (7 √ó 3)"
    },
    {
      q: "A bookshelf has 3 shelves. There are 4 sports books and 13 mystery books on each shelf.\nHow many sports and mystery books are on the bookshelf?",
      options: ["68","51","39","12"],
      answer: "51"
    },
    {
      q: "What numbers will complete the area model to show 7 √ó 502?\nThe three blanks on the model, in order from top left to bottom right, should be‚Äî",
      options: [
        "50----350----14",
        "500----3,500----14",
        "70----350----2",
        "502----7----3,514"
      ],
      answer: "500----3,500----14",
      image: "assets/MM5A7.png"
    },
    {
      q: "What is the product of 6 √ó 8,400?",
      options: ["48,000","50,400","52,800","53,400"],
      answer: "50,400"
    },
    {
      q: "When using partial products to find 8 √ó 24, which set of partial products is correct?",
      options: ["80 + 24","16 + 24","160 + 32","200 + 42"],
      answer: "160 + 32"
    },
    {
      q: "What is the product of 3 √ó 61?",
      options: ["183","168","181","204"],
      answer: "183"
    },
    {
      q: "The base-ten blocks below show a multiplication equation. (3 groups of 1 hundred, 2 tens, and 1 one)\nWhich equation do they represent?",
      options: [
        "3 √ó 110 = 330",
        "3 √ó 111 = 333",
        "3 √ó 121 = 363",
        "3 √ó 211 = 633"
      ],
      answer: "3 √ó 121 = 363",
      image: "assets/MM5A11.png"
    },
    {
      q: "A display at a store contains 5 rows of 24 fruit drink bottles and 8 rows of 12 water bottles.\nHow many fruit drink and water bottles does the display contain?",
      options: ["132","144","216","360"],
      answer: "216"
    },
    {
      q: "A playhouse on a school‚Äôs playground has 2 levels. The first level is 8 feet off the ground. The second level is 14 feet higher than the first level. A tree on the playground is 2 times as tall as the playhouse.\nHow many feet tall is the tree?",
      options: ["20 feet","44 feet","32 feet","40 feet"],
      answer: "44 feet"
    },
    {
      q: "Marley is packing boxes with cans of paint to be used with an art project. She has 80 cans of paint, and each box holds 8 cans of paint. Marley packed 6 boxes. She needs to know how many cans of paint she has left.\nWhich equation shows how many cans of paint, p, are left?",
      options: [
        "80 ‚àí 8 √ó 4 = p",
        "80 ‚àí 8 √ó 6 = p",
        "80 ‚àí 8 ‚àí 6 = p",
        "80 ‚àí 8 ‚àí 2 √ó 6 = p"
      ],
      answer: "80 ‚àí 8 √ó 6 = p"
    },
    {
      q: "Marley is packing boxes with cans of paint to be used with an art project. She has 80 cans of paint, and each box holds 8 cans of paint. Marley packed 6 boxes. She needs to know how many cans of paint she has left.\nHow many cans of paint does Marley still need to pack?",
      options: ["24 cans","32 cans","40 cans","48 cans"],
      answer: "32 cans"
    }
  ],
  B: [
    {
      q: "Which multiplication equation is shown by the area model?",
      options: [
        "7 √ó 18 = 126",
        "8 √ó 17 = 136",
        "10 √ó 15 = 150",
        "10 √ó 17 = 170"
      ],
      answer: "7 √ó 18 = 126",
      image: "assets/MM5B1.png"
    },
    {
      q: "What is the product?\n41 √ó 8",
      options: ["248","328","368","408"],
      answer: "328"
    },
    {
      q: "What is the product?\n146 √ó 6",
      options: ["646","776","846","876"],
      answer: "876"
    },
    {
      q: "What is the product of 5 √ó 1,327?",
      options: ["5,635","6,375","6,635","7,635"],
      answer: "6,635"
    },
    {
      q: "Which of these uses expanded form and the Distributive Property to find 3 √ó 49?",
      options: [
        "(3 √ó 40) + (9)",
        "(3 √ó 4) + (3 √ó 9)",
        "(3 √ó 40) + (3 √ó 9)",
        "(3 √ó 4) + (3 √ó 9 √ó 10)"
      ],
      answer: "(3 √ó 40) + (3 √ó 9)"
    },
    {
      q: "There are 4 rows of chairs in a classroom. There are 2 teacher chairs and 13 student chairs in each row.\nHow many teacher and student chairs are in the classroom?",
      options: ["8","52","60","104"],
      answer: "60"
    },
    {
      q: "What numbers will complete the area model to show 2 √ó 906?\nThe three blanks on the model, in order from top left to bottom right, should be‚Äî",
      options: [
        "90, 180, 12",
        "900, 1,800, 12",
        "906, 2, 1,812",
        "9, 180, 12"
      ],
      answer: "900, 1,800, 12",
      image: "assets/MM5B7.png"
    },
    {
      q: "What is the product of 9 √ó 3,500?",
      options: ["27,000","28,500","30,500","31,500"],
      answer: "31,500"
    },
    {
      q: "Which statement about 6 √ó 19 is true?",
      options: [
        "The tens product is 50, the ones product is 49, and the total is 99.",
        "The tens product is 60, the ones product is 54, and the total is 114.",
        "The tens product is 40, the ones product is 24, and the total is 64.",
        "The tens product is 16, the ones product is 8, and the total is 168."
      ],
      answer: "The tens product is 60, the ones product is 54, and the total is 114."
    },
    {
      q: "What is the product of 4 √ó 42?",
      options: ["126","148","160","168"],
      answer: "168"
    },
    {
      q: "The base-ten blocks below show a multiplication equation. (4 groups of 2 hundreds, 1 ten, and 1 one)\nWhich equation do they represent?",
      options: [
        "4 √ó 211 = 844",
        "4 √ó 112 = 448",
        "4 √ó 121 = 484",
        "4 √ó 221 = 884"
      ],
      answer: "4 √ó 211 = 844",
      image: "assets/MM5B11.png"
    },
    {
      q: "An art teacher displays 5 rows of 11 paintings and 6 rows of 21 drawings.\nHow many paintings and drawings does the art teacher display?",
      options: ["166","181","191","211"],
      answer: "181"
    },
    {
      q: "Students are watching a school play. There are 12 fourth grade students sitting in the first row and 9 fourth grade students sitting in the second row. There are 3 times as many third-grade students sitting in these rows.\nHow many third-grade students are sitting in these rows?",
      options: ["21","42","63","72"],
      answer: "63"
    },
    {
      q: "Paolo is filling small aquariums with colorful rocks. He has 96 rocks, and each aquarium gets 12 rocks. Paolo fills 6 aquariums with rocks. He needs to know how many rocks he has left.\nWhich equation shows how many rocks, r, are left?",
      options: [
        "96 ‚àí 12 √ó 2 = r",
        "96 ‚àí 12 √ó 6 = r",
        "96 ‚àí 12 ‚àí 6 = r",
        "96 ‚àí 12 ‚àí 2 √ó 6 = r"
      ],
      answer: "96 ‚àí 12 √ó 6 = r"
    },
    {
      q: "Paolo is filling small aquariums with colorful rocks. He has 96 rocks, and each aquarium gets 12 rocks. Paolo fills 6 aquariums with rocks. He needs to know how many rocks he has left.\nHow many rocks does Paolo have left?",
      options: ["24 rocks","18 rocks","30 rocks","36 rocks"],
      answer: "24 rocks"
    }
  ]
};

let currentTest = [];
let currentIndex = 0;
let score = 0;

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

function playSound(type) {
  const audio = (type === "correct")
    ? document.getElementById("ding-sound")
    : document.getElementById("buzz-sound");
  audio.currentTime = 0;
  audio.play();
}

function startTest(form) {
  currentTest = JSON.parse(JSON.stringify(tests[form]));
  currentTest = shuffle(currentTest);
  currentTest.forEach(q => { q.options = shuffle(q.options); });
  currentIndex = 0;
  score = 0;
  document.getElementById("start-screen").classList.add("hidden");
  document.getElementById("quiz-screen").classList.remove("hidden");
  showQuestion();
}

function showQuestion() {
  const qObj = currentTest[currentIndex];
  document.getElementById("progress").innerText =
    `Question ${currentIndex + 1} of ${currentTest.length}`;
  const percent = (currentIndex / currentTest.length) * 100;
  document.getElementById("progress-bar").style.width = percent + "%";

  const img = document.getElementById("q-image");
  if (qObj.image) {
    img.src = qObj.image;
    img.style.display = "block";
  } else {
    img.style.display = "none";
  }

  document.getElementById("question-text").innerText = qObj.q;

  const answersDiv = document.getElementById("answers");
  answersDiv.innerHTML = "";
  qObj.options.forEach(opt => {
    const btn = document.createElement("button");
    btn.innerText = opt;
    btn.className = "answer-btn";
    btn.onclick = () => checkAnswer(opt, qObj.answer, btn);
    answersDiv.appendChild(btn);
  });

  document.getElementById("feedback").innerText = "";
  document.getElementById("next-btn").classList.add("hidden");
}

function checkAnswer(selected, correct, btn) {
  if (selected === correct) {
    document.getElementById("feedback").innerText = "‚úÖ Correct!";
    document.getElementById("feedback").className = "feedback correct";
    btn.classList.add("correct");
    score++;
    playSound("correct");
  } else {
    document.getElementById("feedback").innerText =
      "‚ùå Incorrect. Correct answer: " + correct;
    document.getElementById("feedback").className = "feedback incorrect";
    btn.classList.add("incorrect");
    playSound("incorrect");
  }

  Array.from(document.getElementById("answers").children)
    .forEach(b => b.disabled = true);
  document.getElementById("next-btn").classList.remove("hidden");
}

function nextQuestion() {
  currentIndex++;
  if (currentIndex < currentTest.length) {
    showQuestion();
  } else {
    endTest();
  }
}

function endTest() {
  document.getElementById("quiz-screen").classList.add("hidden");
  document.getElementById("end-screen").classList.remove("hidden");
  const percent = Math.round((score / currentTest.length) * 100);
  document.getElementById("progress-bar").style.width = "100%";
  document.getElementById("final-score").innerText =
    `You scored ${score} out of ${currentTest.length}.`;
  document.getElementById("percent-score").innerText =
    `That‚Äôs ${percent}%.`;

  let message;
  if (percent === 100) {
    message = "üåü Excellent work! Perfect score!";
  } else if (percent >= 80) {
    message = "üëç Great job! You really know this material.";
  } else if (percent >= 60) {
    message = "üëå Not bad! Keep practicing to improve.";
  } else {
    message = "üí° Keep trying! Review the lessons and practice again.";
  }
  document.getElementById("performance-message").innerText = message;

  startConfetti();
}

function restart() {
  document.getElementById("end-screen").classList.add("hidden");
  document.getElementById("start-screen").classList.remove("hidden");
  stopConfetti();
  document.getElementById("progress-bar").style.width = "0%";
}

/* Simple confetti animation */
const confettiCanvas = document.getElementById("confetti-canvas");
const ctx = confettiCanvas.getContext("2d");
let confettiPieces = [];
let confettiAnimationId = null;

function resizeCanvas() {
  confettiCanvas.width = window.innerWidth;
  confettiCanvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

function createConfetti() {
  const colors = ["#ff4136","#ff851b","#ffdc00","#2ecc40","#0074d9","#b10dc9"];
  for (let i = 0; i < 200; i++) {
    confettiPieces.push({
      x: Math.random() * confettiCanvas.width,
      y: Math.random() * confettiCanvas.height - confettiCanvas.height,
      size: Math.random() * 6 + 2,
      color: colors[Math.floor(Math.random() * colors.length)],
      speed: Math.random() * 3 + 2,
      tilt: Math.random() * 10 - 5
    });
  }
}

function drawConfetti() {
  ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
  confettiPieces.forEach(p => {
    ctx.fillStyle = p.color;
    ctx.beginPath();
    ctx.ellipse(p.x, p.y, p.size, p.size / 2, p.tilt, 0, 2 * Math.PI);
    ctx.fill();
    p.y += p.speed;
    if (p.y > confettiCanvas.height) {
      p.y = -10;
      p.x = Math.random() * confettiCanvas.width;
    }
  });
  confettiAnimationId = requestAnimationFrame(drawConfetti);
}

function startConfetti() {
  confettiPieces = [];
  createConfetti();
  if (!confettiAnimationId) {
    drawConfetti();
  }
}

function stopConfetti() {
  if (confettiAnimationId) {
    cancelAnimationFrame(confettiAnimationId);
    confettiAnimationId = null;
  }
  ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
}
</script>
</body>
</html>
